
<!DOCTYPE html>
<html>
<head>
<title>PartnerHub SQL Demo</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#f8fafc;padding:40px;max-width:1200px;margin:auto;}
h1{color:#1e40af;font-size:2.2em;text-align:center;margin-bottom:10px;}
.subtitle{text-align:center;color:#64748b;font-size:1.1em;margin-bottom:30px;}
.editor{width:100%;height:220px;font-family:'SF Mono',monospace;font-size:15px;padding:20px;border:2px solid #e2e8f0;border-radius:12px;background:#1f2937;color:#e2e8f0;resize:vertical;box-sizing:border-box;}
.buttons{text-align:center;margin:25px 0;}
button{background:#1e40af;color:white;border:none;padding:14px 28px;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;margin:0 8px;transition:all 0.2s;}
button:hover{background:#1e3a8a;}
.results{margin-top:30px;padding:25px;background:white;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,0.08);}
table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{padding:16px 12px;text-align:left;border-bottom:1px solid #f1f5f9;}
th{background:#f8fafc;font-weight:600;color:#374151;}
.isv{background:#dbeafe;color:#1e40af;padding:4px 10px;border-radius:20px;font-size:13px;font-weight:500;}
.si{background:#e0f2fe;color:#0369a1;padding:4px 10px;border-radius:20px;font-size:13px;font-weight:500;}
</style>
</head>
<body>
<h1>üõ†Ô∏è PartnerHub SQL Playground</h1>
<p class="subtitle">Fake partner data ‚Ä¢ Write SQL ‚Üí See results instantly</p>
<textarea class="editor" id="sql" placeholder="Type SQL queries here...&#10;Examples: SELECT * FROM partners WHERE type='ISV';&#10;SELECT type, SUM(arr) FROM partners GROUP BY type;">SELECT * FROM partners;</textarea>
<div class="buttons">
<button onclick="runSQL()">‚ñ∂Ô∏è Execute SQL</button>
<button onclick="loadSQL(`SELECT * FROM partners WHERE type='ISV';`)">ISV Partners</button>
<button onclick="loadSQL(`SELECT type, COUNT(*) as count, SUM(arr) as total FROM partners GROUP BY type;`)">Analytics</button>
<button onclick="loadSQL(`SELECT name, arr FROM partners ORDER BY arr DESC LIMIT 3;`)">Top ARR</button>
</div>
<div id="results" class="results"></div>
<script>
async function execute() {
  const sql = document.getElementById('sql-input').value.trim();
  const results = document.getElementById('results');
  const loading = document.getElementById('loading');
  
  loading.style.display = 'block';
  results.innerHTML = '';
  
  try {
    const response = await fetch('https://nonprognosticative-yolanda-chemotactic.ngrok-free.dev/execute-sql', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ query: sql })
    });
    
    const data = await response.json();
    loading.style.display = 'none';
    
    if (data.error) {
      results.innerHTML = `<div class="error">‚ùå SQL Error: ${data.error}</div>`;
      return;
    }
    
    // Show raw results + SQL
    results.innerHTML = `
      <h3>‚úÖ Success: ${data.rows ? data.rows.length : 0} rows</h3>
      <pre style="background:#f8f9fa;padding:1rem;border-radius:8px;border-left:4px solid #28a745;font-family:monospace;">${sql}</pre>
      ${data.rows ? `<pre>${JSON.stringify(data.rows, null, 2)}</pre>` : ''}
    `;
    
  } catch (e) {
    loading.style.display = 'none';
    results.innerHTML = `<div class="error">üåê Network error: ${e.message}</div>`;
  }
}
function runSQL() { execute(); }</script>
</body></html>
